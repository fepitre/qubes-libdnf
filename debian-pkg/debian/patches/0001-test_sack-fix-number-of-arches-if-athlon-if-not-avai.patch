From 27e0687c299c733aff5091b0406907cf3c97c5d7 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Fr=C3=A9d=C3=A9ric=20Pierret=20=28fepitre=29?=
 <frederic.pierret@qubes-os.org>
Date: Sun, 1 Nov 2020 13:32:10 +0100
Subject: [PATCH] test_sack: fix number of arches if "athlon" if not available

It's the case for Debian and openSUSE
---
 tests/hawkey/test_sack.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/tests/hawkey/test_sack.cpp b/tests/hawkey/test_sack.cpp
index 5eab83b3..fdc93153 100644
--- a/tests/hawkey/test_sack.cpp
+++ b/tests/hawkey/test_sack.cpp
@@ -83,13 +83,13 @@ START_TEST(test_list_arches)
     const char ** arches = dnf_sack_list_arches(sack);
 
     /* noarch, x86_64, athlon, i686, i586, i486, i386 */
-    fail_unless(g_strv_length((gchar**)arches) == 7);
+    fail_unless(7 - g_strv_length((gchar**)arches) >= 0);
 
     if (strcmp(arches[2], "athlon") == 0) {
         // Fedora, Mageia
         ck_assert_str_eq(arches[3], "i686");
     } else {
-        // openSUSE - "athlon" is not available
+        // openSUSE, Debian - "athlon" is not available
         ck_assert_str_eq(arches[3], "i586");
     }
 
-- 
2.26.2

